# –õ–∏–º–∏—Ç—ã Gemini API

## üìä –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (Free Tier)

### –û—Å–Ω–æ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã:
- **–ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É**: 60 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- **–ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å**: 1500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
- **–¢–æ–∫–µ–Ω–æ–≤ –≤ –º–∏–Ω—É—Ç—É**: 15000 —Ç–æ–∫–µ–Ω–æ–≤/–º–∏–Ω—É—Ç—É
- **–¢–æ–∫–µ–Ω–æ–≤ –≤ –¥–µ–Ω—å**: 50000 —Ç–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å

### –õ–∏–º–∏—Ç—ã –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- **–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –º–∞–∫—Å–∏–º—É–º 4MB
- **–†–∞–∑–º–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**: –º–∞–∫—Å–∏–º—É–º 16KB (–≤–∫–ª—é—á–∞—è –ø—Ä–æ–º–ø—Ç + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- **–§–æ—Ä–º–∞—Ç—ã**: PNG, JPEG, WEBP, HEIC

## üí∞ –ü–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (Paid Tier)

### –õ–∏–º–∏—Ç—ã –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º:
- **US**: 1800 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- **EU**: 600 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- **Other**: 300 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã:
- **–¢–æ–∫–µ–Ω–æ–≤ –≤ –º–∏–Ω—É—Ç—É**: 30000 —Ç–æ–∫–µ–Ω–æ–≤/–º–∏–Ω—É—Ç—É
- **–¢–æ–∫–µ–Ω–æ–≤ –≤ –¥–µ–Ω—å**: 100000 —Ç–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ

–í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ª–∏–º–∏—Ç—ã:

```python
# –í process_pure_vision_fixed.py
requests_per_minute=80  # –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
max_concurrent_requests=3  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ 5
```

## üö® –û—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤

### 429 Rate Limit Exceeded
```
HTTP 429: Rate limit exceeded for requests
```

### 429 Metadata Size Exceeded
```
429 received metadata size exceeds hard limit (value length 19814 vs. 16384)
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
   ```python
   requests_per_minute=60  # –í–º–µ—Å—Ç–æ 80
   max_concurrent_requests=2  # –í–º–µ—Å—Ç–æ 3
   ```

2. **–î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏**:
   ```python
   await asyncio.sleep(1)  # 1 —Å–µ–∫—É–Ω–¥–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ 429
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Google Cloud Console –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã**:
   - –°–∂–∏–º–∞–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - –°–æ–∫—Ä–∞—â–∞–π—Ç–µ –ø—Ä–æ–º–ø—Ç—ã (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞

–ß—Ç–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞, –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
# –í process_pure_vision_fixed.py, —Å—Ç—Ä–æ–∫–∞ 773
requests_per_minute=60  # –í–º–µ—Å—Ç–æ 80

# –í CLI –æ–ø—Ü–∏—è—Ö, —Å—Ç—Ä–æ–∫–∞ 700
@click.option('--max-concurrent', type=int, default=2, help='–ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞)')
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Google Cloud Console:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "APIs & Services" > "Dashboard"
4. –ù–∞–π–¥–∏—Ç–µ "Gemini API" –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```
INFO: Rate limit hit for page 5
WARNING: –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤, –æ–∂–∏–¥–∞–Ω–∏–µ 45.2 —Å–µ–∫—É–Ω–¥
```

## üöÄ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω

–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–≤—ã—à–∞–µ—Ç–µ –ª–∏–º–∏—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞:

1. **–í–∫–ª—é—á–∏—Ç–µ –±–∏–ª–ª–∏–Ω–≥** –≤ Google Cloud Console
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–≤–æ—Ç—ã** –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
3. **–£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã** –≤ –∫–æ–¥–µ:
   ```python
   requests_per_minute=300  # –î–ª—è –ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
   max_concurrent_requests=5
   ```

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Gemini API Documentation](https://ai.google.dev/docs)
- [Rate Limits Guide](https://ai.google.dev/docs/rate_limits)
- [Google Cloud Console](https://console.cloud.google.com/)
- [Billing Setup](https://cloud.google.com/billing/docs/how-to/modify-project) 